{"version":3,"sources":["angular-minimodal.js"],"names":[],"mappings":"CAAA,WAGA,YAMA,SAAA,KAAA,QAAA,EAEA,QAAA,KAYA,QAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAQA,QAAA,GAAA,GAEA,GAAA,MAAA,EAAA,OACA,KAAA,IAAA,OAAA,8CACA,OAAA,SAAA,QAAA,EAAA,MAGA,QAAA,GAAA,GAEA,GAAA,GAAA,EAAA,QACA,EAAA,EAAA,QACA,EAAA,EAAA,IAAA,EAMA,OALA,OAAA,GAAA,EAAA,OAAA,EACA,EAAA,QAAA,QAAA,QAAA,IAEA,EAAA,EAAA,IAAA,GACA,KAAA,GACA,EAGA,QAAA,GAAA,GAEA,MAAA,EAAA,OAAA,EAAA,MAAA,MACA,EAAA,MAAA,QAGA,QAAA,GAAA,GAEA,MAAA,EAAA,OAAA,EAAA,MAAA,MACA,EAAA,MAAA,YAGA,QAAA,GAAA,GAEA,GAAA,GAAA,CACA,KAAA,EAAA,EAAA,EAAA,EAAA,SAAA,EAEA,EAAA,EAAA,GACA,EAAA,KAAA,EAAA,IACA,EAAA,OAAA,EAAA,GAIA,QAAA,GAAA,GAIA,GAFA,EAAA,QAAA,OAAA,EAAA,GAEA,MAAA,EACA,KAAA,IAAA,OAAA,0CAEA,IAAA,gBAAA,GAAA,YACA,KAAA,IAAA,OAAA,0CAEA,IAAA,GAAA,EAAA,QAEA,GACA,GAAA,IACA,MAAA,KACA,OAAA,EAAA,QACA,QAAA,SAAA,GAEA,EAAA,QAAA,IAEA,OAAA,SAAA,GAEA,EAAA,OAAA,IAEA,KAAA,WAEA,EAAA,OAEA,KAAA,WAEA,EAAA,OA2CA,OAvCA,GAAA,QAAA,QAAA,WAEA,MAAA,EAAA,MAAA,OACA,EAAA,MAAA,QAEA,EAAA,GACA,QAAA,QAAA,EAAA,OAAA,WAGA,EAAA,KAAA,GAEA,EAAA,EAAA,aACA,KAAA,SAAA,GAEA,GAAA,GAAA,EAAA,EAKA,IAJA,EAAA,MAAA,EAEA,SAAA,KAAA,YAAA,GAEA,EAAA,WACA,CACA,GAAA,IACA,OAAA,EAAA,QAAA,EAAA,OACA,eAAA,GAGA,EAAA,EAAA,EAAA,WAAA,EACA,GAAA,KAAA,0BAAA,GACA,EAAA,WAAA,KAAA,0BAAA,GAGA,EAAA,GAAA,EAAA,QAEA,EAAA,gBACA,EAAA,SAAA,WAAA,EAAA,WACA,MAAA,EAAA,WACA,EAAA,cAGA,EA1HA,GAAA,IACA,eAAA,GAGA,IA2HA,OAFA,SAAA,OAAA,MAAA,KAAA,IAEA,KA3IA,KAAA,MACA,QACA,KACA,cACA,WACA,aACA,iBACA,GAfA,QAAA,OAAA,wBACA,SAAA,SAAA,EAEA,IAAA,GAAA","file":"angular-minimodal-0.2.1.min.js","sourcesContent":["(function()\r\n{\r\n\t/* global angular */\r\n\t\"use strict\";\r\n\t\r\n\tangular.module(\"angular-minimodal\", [])\r\n\t\t.provider(\"$modal\", AngularMiniModal);\r\n\t\t\r\n\tvar _id = 0;\r\n\tfunction getId() { return ++_id; }\r\n\t\r\n\tfunction AngularMiniModal()\r\n\t{\r\n\t\tthis.$get = [\r\n\t\t\t\"$http\",\r\n\t\t\t\"$q\",\r\n\t\t\t\"$controller\",\r\n\t\t\t\"$compile\",\r\n\t\t\t\"$rootScope\",\r\n\t\t\t\"$templateCache\",\r\n\t\t\tAngularMiniModalGetter\r\n\t\t];\r\n\t\t\r\n\t\tfunction AngularMiniModalGetter($http, $q, $controller, $compile, $rootScope, $templateCache)\r\n\t\t{\r\n\t\t\tvar defaultOptions = {\r\n\t\t\t\tdismissEscape: true\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar _instances = [];\r\n\t\t\t\r\n\t\t\tfunction getModalTemplateSuccess(response)\r\n\t\t\t{\r\n\t\t\t\tif(response.status !== 200)\r\n\t\t\t\t\tthrow new Error(\"angular-minimodal: Could not load template.\");\r\n\t\t\t\treturn angular.element(response.data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getModalTemplate(path)\r\n\t\t\t{\r\n\t\t\t\tvar deferred = $q.defer(),\r\n\t\t\t\t\tpromise = deferred.promise,\r\n\t\t\t\t\tcacheData = $templateCache.get(path);\r\n\t\t\t\tif(cacheData != null && cacheData.length > 0)\r\n\t\t\t\t\tdeferred.resolve(angular.element(cacheData));\r\n\t\t\t\telse\r\n\t\t\t\t\tpromise = $http.get(path)\r\n\t\t\t\t\t\t.then(getModalTemplateSuccess);\r\n\t\t\t\treturn promise;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction hideModal(instance)\r\n\t\t\t{\r\n\t\t\t\tif(instance.modal != null && instance.modal.open)\r\n\t\t\t\t\tinstance.modal.close();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction showModal(instance)\r\n\t\t\t{\r\n\t\t\t\tif(instance.modal != null && !instance.modal.open)\r\n\t\t\t\t\tinstance.modal.showModal();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction removeModal(instance)\r\n\t\t\t{\r\n\t\t\t\tvar ins, i;\r\n\t\t\t\tfor(i = 0; i < _instances.length; ++i)\r\n\t\t\t\t{\r\n\t\t\t\t\tins = _instances[i];\r\n\t\t\t\t\tif(ins.id === instance.id)\r\n\t\t\t\t\t\t_instances.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction show(options)\r\n\t\t\t{\r\n\t\t\t\toptions = angular.extend(defaultOptions, options);\r\n\t\t\t\t\r\n\t\t\t\tif(options == null)\r\n\t\t\t\t\tthrow new Error(\"angular-minimodal: No options provided.\");\r\n\t\t\t\t\t\r\n\t\t\t\tif(typeof(options.templateUrl) !== \"string\")\r\n\t\t\t\t\tthrow new Error(\"angular-minimodal: Invalid templateUrl.\");\r\n\t\t\t\t\t\r\n\t\t\t\tvar deferred = $q.defer();\r\n\t\t\t\t\r\n\t\t\t\tvar instance = {\r\n\t\t\t\t\tid: getId(),\r\n\t\t\t\t\tmodal: null,\r\n\t\t\t\t\tresult: deferred.promise,\r\n\t\t\t\t\tresolve: function(v)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdeferred.resolve(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\treject: function(v)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdeferred.reject(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\thide: function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thideModal(this);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshow: function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tshowModal(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tdeferred.promise.finally(function()\r\n\t\t\t\t{\r\n\t\t\t\t\tif(instance.modal.close != null)\r\n\t\t\t\t\t\tinstance.modal.close();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tremoveModal(instance);\r\n\t\t\t\t\tangular.element(instance.modal).remove();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t_instances.push(instance);\r\n\t\t\t\t\r\n\t\t\t\tgetModalTemplate(options.templateUrl)\r\n\t\t\t\t\t.then(function($modal)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar modal = $modal[0];\r\n\t\t\t\t\t\tinstance.modal = modal;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdocument.body.appendChild(modal);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(options.controller)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar locals = {\r\n\t\t\t\t\t\t\t\t$scope: options.$scope || $rootScope.$new(),\r\n\t\t\t\t\t\t\t\t$modalInstance: instance\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar controller = $controller(options.controller, locals);\r\n\t\t\t\t\t\t\t$modal.data(\"$ngControllerController\", controller);\r\n\t\t\t\t\t\t\t$modal.children().data(\"$ngControllerController\", controller);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$compile($modal)(locals.$scope);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(options.dismissEscape)\r\n\t\t\t\t\t\t\tmodal.oncancel = function() { instance.reject(); };\r\n\t\t\t\t\t\tif(modal.showModal != null)\r\n\t\t\t\t\t\t\tmodal.showModal();\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn instance;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tangular.extend(this, { show: show });\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n}());"],"sourceRoot":"src"}